{"ast":null,"code":"import _toConsumableArray from\"/home/deepak/Videos/quiz-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _defineProperty from\"/home/deepak/Videos/quiz-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/home/deepak/Videos/quiz-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{Button,CircularProgress,Container,Typography}from\"@mui/material\";import{Box}from\"@mui/system\";import{decode}from\"html-entities\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useHistory}from\"react-router\";import Card from'@mui/material/Card';import CardActions from'@mui/material/CardActions';import CardContent from'@mui/material/CardContent';import List from'@mui/material/List';import ListItemButton from'@mui/material/ListItemButton';import ListItemIcon from'@mui/material/ListItemIcon';import ListItemText from'@mui/material/ListItemText';import useAxios from\"../hooks/Axios\";import{handleScoreChnage,userAnswers}from\"../Redux/action\";import{array}from\"yup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var getRandomInt=function getRandomInt(max){return Math.floor(Math.random()*Math.floor(max));};var Questions=function Questions(){var _useSelector=useSelector(function(state){return state;}),question_category=_useSelector.question_category,question_difficulty=_useSelector.question_difficulty,user_answers=_useSelector.user_answers,question_type=_useSelector.question_type,question_limit=_useSelector.question_limit,amount_of_question=_useSelector.amount_of_question,score=_useSelector.score,name=_useSelector.name,question_answers=_useSelector.question_answers;var history=useHistory();var dispatch=useDispatch();var apiUrl=\"/api.php?amount=\".concat(amount_of_question);useEffect(function(){console.log(\"inital : \",question_answers);},[]);var _useAxios=useAxios({url:apiUrl}),response=_useAxios.response,loading=_useAxios.loading;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),questionIndex=_useState2[0],setQuestionIndex=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),options=_useState4[0],setOptions=_useState4[1];var _React$useState=React.useState(1),_React$useState2=_slicedToArray(_React$useState,2),selectedIndex=_React$useState2[0],setSelectedIndex=_React$useState2[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),enableNext=_useState6[0],setEnableNext=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),intialRender=_useState8[0],setInitialRender=_useState8[1];var handleListItemClick=function handleListItemClick(number){setSelectedIndex(number);};useEffect(function(){if(question_answers!==null&&question_answers!==void 0&&question_answers.length){var question=question_answers[questionIndex];console.log(\"question \",question.answers);var answers=[];for(var _i=0,_Object$entries=Object.entries(question.answers);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];console.log(\"values\",value);if(value)answers.push(_defineProperty({},key,value));}answers.splice(getRandomInt(question.answers.length),0// question.correct_answer\n);setOptions(answers);}else{history.push(\"/\");}},[question_answers,questionIndex]);if(loading){return/*#__PURE__*/_jsx(Box,{mt:20,children:/*#__PURE__*/_jsx(CircularProgress,{})});}var handleClickAnswer=function handleClickAnswer(dataName,next){console.log(\"dad\",dataName.next);var question=question_answers[questionIndex];if(next){console.log(\"+++++++index\");dispatch(userAnswers({questionId:question.id,selectedAnswer:dataName}));}if(next&&questionIndex+1<question_answers.length){console.log(dataName,\"+++++\",question.correct_answer);if(dataName==question.correct_answer){alert(\"scorechange\");dispatch(handleScoreChnage(score+1));}else{console.log(\"check\",question.correct_answers[dataName+\"_correct\"]);if(question.correct_answers[dataName+\"_correct\"]===\"true\"){console.log(dataName,\"--------\",question.correct_answer);dispatch(handleScoreChnage(score+1));}}console.log(\"selected answer : \",dataName);// dispatch(userAnswers({\n//   questionId:question.id,\n//   selectedAnswer:dataName}))\nsetInitialRender(true);setQuestionIndex(questionIndex+1);setSelectedIndex(0);}else{console.log(\"final\");if(dataName==question.correct_answer){alert(\"scorechange\");dispatch(handleScoreChnage(score+1));}else{console.log(\"check\",question.correct_answers[dataName+\"_correct\"]);if(question.correct_answers[dataName+\"_correct\"]===\"true\"){console.log(dataName,\"--------\",question.correct_answer);dispatch(handleScoreChnage(score+1));}}alert(\"last\");var percentageValue=(score/question_answers.length*100).toFixed(0);if(name){var userResult={name:name,question_difficulty:question_difficulty,question_limit:question_limit,question_category:question_category,score:score,user_answers:user_answers,percentageValue:percentageValue,question_answers:question_answers};var getUserDetails=localStorage.getItem(\"userDetails\");if(!getUserDetails){var userArray=[];localStorage.setItem(\"userDetails\",JSON.stringify(userArray));}else{console.log(\"data\",localStorage.getItem(\"userDetails\"));if(localStorage.getItem(\"userDetails\")){localStorage.setItem(\"userDetails\",JSON.stringify([].concat(_toConsumableArray(JSON.parse(localStorage.getItem(\"userDetails\"))),[userResult])));}}}console.log(localStorage.getItem(\"userDetails\"),\"getUser\");// window.location.href = `/score?scoreValue=${score}&pecentageValue=${percentageValue}&limit=${question_answers.length}`\n//  history.push(\"/score\");\n}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Container,{maxWidth:\"xl\",children:/*#__PURE__*/_jsxs(Box,{mt:2,mb:2,display:\"flex\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",children:[\"Welcome \",name]}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:question_category}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\"Questions \",questionIndex+1+\"/\"+question_answers.length]})]})}),/*#__PURE__*/_jsx(Container,{sx:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},children:/*#__PURE__*/_jsxs(Card,{className:\"question-card\",sx:{minHeight:\"80vh\",width:\"74%\"},children:[/*#__PURE__*/_jsxs(CardContent,{className:\"card-question\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",className:\"qust\",mt:5,children:question_answers[questionIndex].question}),options.map(function(data,id){return/*#__PURE__*/_jsx(Box,{mt:2,children:/*#__PURE__*/_jsx(List,{component:\"nav\",\"aria-label\":\"main mailbox folders\",className:\"ans-list\",children:/*#__PURE__*/_jsx(ListItemButton,{sx:{boxShadow:\"2\"},name:Object.keys(data),selected:!intialRender?id===selectedIndex:false,onClick:function onClick(){setInitialRender(false);handleListItemClick(id);},children:/*#__PURE__*/_jsx(ListItemText,{primary:Object.values(data)})})})},id);})]}),/*#__PURE__*/_jsx(CardActions,{sx:{padding:\"30px\"},children:/*#__PURE__*/_jsx(Box,{display:\"flex\",width:\"100%\",justifyContent:\"flex-end\",children:/*#__PURE__*/_jsx(Button,{disabled:intialRender,onClick:function onClick(e){handleClickAnswer.apply(void 0,_toConsumableArray(Object.keys(options[selectedIndex])).concat([true]));},variant:\"contained\",size:\"medium\",children:questionIndex+1===question_answers.length?\"SUBMIT\":\"NEXT\"})})})]})})]});};export default Questions;","map":{"version":3,"sources":["/home/deepak/Videos/quiz-app/src/Pages/Question.jsx"],"names":["React","Button","CircularProgress","Container","Typography","Box","decode","useEffect","useState","useDispatch","useSelector","useHistory","Card","CardActions","CardContent","List","ListItemButton","ListItemIcon","ListItemText","useAxios","handleScoreChnage","userAnswers","array","getRandomInt","max","Math","floor","random","Questions","state","question_category","question_difficulty","user_answers","question_type","question_limit","amount_of_question","score","name","question_answers","history","dispatch","apiUrl","console","log","url","response","loading","questionIndex","setQuestionIndex","options","setOptions","selectedIndex","setSelectedIndex","enableNext","setEnableNext","intialRender","setInitialRender","handleListItemClick","number","length","question","answers","Object","entries","key","value","push","splice","handleClickAnswer","dataName","next","questionId","id","selectedAnswer","correct_answer","alert","correct_answers","percentageValue","toFixed","userResult","getUserDetails","localStorage","getItem","userArray","setItem","JSON","stringify","parse","display","alignItems","justifyContent","minHeight","width","map","data","boxShadow","keys","values","padding","e"],"mappings":"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","sourcesContent":["\nimport React from \"react\";\nimport { Button, CircularProgress, Container, Typography } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\n\nimport { decode } from \"html-entities\";\n\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardContent from '@mui/material/CardContent';\nimport List from '@mui/material/List';\nimport ListItemButton from '@mui/material/ListItemButton';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport useAxios from \"../hooks/Axios\";\n\nimport { handleScoreChnage,userAnswers } from \"../Redux/action\";\nimport { array } from \"yup\";\n\nconst getRandomInt = (max) => {\n  return Math.floor(Math.random() * Math.floor(max));\n};\n\nconst Questions = () => {\n  const {\n    question_category,\n    question_difficulty,\n    user_answers,\n    question_type,\n    question_limit,\n    amount_of_question,\n    score,\n    name,\n    question_answers\n  } = useSelector((state) => state);\n\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  let apiUrl = `/api.php?amount=${amount_of_question}`;\n\n  \n  useEffect(() => {\n    console.log(\"inital : \", question_answers)\n  }, [])\n\n  const { response, loading } = useAxios({ url: apiUrl });\n  const [questionIndex, setQuestionIndex] = useState(0);\n  const [options, setOptions] = useState([]);\n  const [selectedIndex, setSelectedIndex] = React.useState(1);\n  const [enableNext, setEnableNext] = useState(false)\n  const [intialRender, setInitialRender] = useState(true)\n\n  const handleListItemClick = (\n    number\n  ) => {\n    setSelectedIndex(number);\n  };\n  useEffect(() => {\n    \n    if (question_answers?.length) {\n      const question = question_answers[questionIndex];\n      console.log(\"question \", question.answers)\n      let answers = []\n      for (const [key, value] of Object.entries(question.answers)) {\n        console.log(\"values\", value);\n\n        if (value)\n          answers.push({\n            [key]: value\n          })\n      }\n      answers.splice(\n        getRandomInt(question.answers.length),\n        0,\n        // question.correct_answer\n      );\n      setOptions(answers);\n    }else{\n      history.push(\"/\")\n    }\n  }, [question_answers, questionIndex]);\n\n  if (loading) {\n    return (\n      <Box mt={20}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  const handleClickAnswer = (dataName, next) => {\n    console.log(\"dad\",dataName.next);\n    const question = question_answers[questionIndex];\n    if(next ){\n      console.log(\"+++++++index\");\n      dispatch(userAnswers({\n        questionId:question.id,\n        selectedAnswer:dataName}))\n    }\n    if (next && questionIndex + 1 < question_answers.length) {\n      console.log(dataName,\"+++++\",question.correct_answer);\n     \n      if (dataName == question.correct_answer) {\n        alert(\"scorechange\")\n        dispatch(handleScoreChnage(score + 1));\n      }else{\n        console.log(\"check\",question.correct_answers[dataName+\"_correct\"])\n        if(question.correct_answers[dataName+\"_correct\"] === \"true\"){\n          console.log(dataName,\"--------\",question.correct_answer);\n          dispatch(handleScoreChnage(score + 1));\n        }\n      }\n\n      console.log(\"selected answer : \",dataName)\n      // dispatch(userAnswers({\n      //   questionId:question.id,\n      //   selectedAnswer:dataName}))\n      setInitialRender(true)\n      setQuestionIndex(questionIndex + 1);\n      setSelectedIndex(0)\n    } else {\n      console.log(\"final\")\n      if (dataName == question.correct_answer) {\n        alert(\"scorechange\")\n        dispatch(handleScoreChnage(score + 1));\n      }else{\n        console.log(\"check\",question.correct_answers[dataName+\"_correct\"])\n        if(question.correct_answers[dataName+\"_correct\"] === \"true\"){\n          console.log(dataName,\"--------\",question.correct_answer);\n          dispatch(handleScoreChnage(score + 1));\n        }\n      }\n      alert(\"last\") \n        \n      let percentageValue = ((score / question_answers.length) * 100).toFixed(0);\n      if(name){\n        const userResult = {\n          name: name,\n          question_difficulty: question_difficulty,\n          question_limit: question_limit,\n          question_category,\n          score: score,\n          user_answers: user_answers,\n          percentageValue: percentageValue,\n          question_answers: question_answers\n        }\n    \n        let getUserDetails = localStorage.getItem(\"userDetails\")\n    \n        if (!getUserDetails) {\n          var userArray = []\n          localStorage.setItem(\"userDetails\", JSON.stringify(userArray))\n        } else {\n          console.log(\"data\", localStorage.getItem(\"userDetails\"))\n          if (localStorage.getItem(\"userDetails\")) {\n            localStorage.setItem(\"userDetails\", JSON.stringify([...JSON.parse(localStorage.getItem(\"userDetails\")), userResult]))\n          }\n        }\n       \n      }\n      console.log(localStorage.getItem(\"userDetails\"),\"getUser\")\n\n      // window.location.href = `/score?scoreValue=${score}&pecentageValue=${percentageValue}&limit=${question_answers.length}`\n      //  history.push(\"/score\");\n    }\n  };\n\n  return (\n    <>\n<Container maxWidth={\"xl\"} >\n      <Box mt={2} mb={2} display={\"flex\"} justifyContent={\"space-between\"}>\n        <Typography variant=\"h5\">Welcome {name}</Typography>\n        <Typography variant=\"h4\">{question_category}</Typography>\n        <Typography variant=\"h6\">Questions {questionIndex + 1 + \"/\" + question_answers.length}</Typography>\n      </Box>\n      </Container>\n      <Container sx={{ display:\"flex\",alignItems:\"center\",justifyContent:\"center\",}}  >\n      <Card  className=\"question-card\"  sx={{ minHeight:\"80vh\",width:\"74%\"}}>\n        <CardContent className=\"card-question\" >\n          <Typography variant=\"h3\" className=\"qust\" mt={5} >\n            {/* {decode(response.results[questionIndex].question)} */}\n            {question_answers[questionIndex].question}\n          </Typography>\n          {options.map((data, id) => (\n            <Box mt={2} key={id}>\n              <List component=\"nav\" aria-label=\"main mailbox folders\" className=\"ans-list\">\n                <ListItemButton sx={{boxShadow:\"2\"}} name={Object.keys(data)}\n                  selected={!intialRender ? id === selectedIndex : false}\n                  onClick={() => {\n                    setInitialRender(false);\n                    handleListItemClick(id);\n                  }}\n                >\n                  <ListItemText primary={Object.values(data)} />\n                </ListItemButton>\n              </List>\n              {/* <Button name={Object.keys(data)} onClick={handleClickAnswer} variant=\"contained\">\n            {Object.values(data)}\n          </Button> */}\n            </Box>\n          ))}\n          {/* <Box mt={5}>\n            Score: {score} / {question_answers.length}\n          </Box> */}\n         \n        </CardContent>\n\n        <CardActions sx={{padding:\"30px\"}} >\n            <Box display={\"flex\"} width={\"100%\"} justifyContent={\"flex-end\"}>\n              {/* <Button variant=\"contained\" size=\"medium\">PREV</Button> */}\n              <Button disabled={intialRender} onClick={(e) => { handleClickAnswer(...Object.keys(options[selectedIndex]), true) }} variant=\"contained\" size=\"medium\">\n                {questionIndex + 1 === question_answers.length ? \"SUBMIT\" : \"NEXT\"}\n              </Button>\n            </Box>\n          </CardActions>\n      </Card>\n      </Container>\n    </>\n  );\n};\n\nexport default Questions;\n"]},"metadata":{},"sourceType":"module"}